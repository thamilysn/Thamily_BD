#Exemplo de drop por schema
DROP schema estudodecaso2_BD;

#Criação do Banco de dados
Create Schema if not exists estudodecaso2_BD;

#Banco de dados
Use estudodecaso2_BD;

#Tabelas Normais
Create table if not exists PASSAGEIROS(
PASS_CPF INT PRIMARY KEY, 
PASS_NOME VARCHAR (100) NOT NULL, 
PASS_TEL VARCHAR (10) NOT NULL,
PASS_EMAIL VARCHAR (100) NOT NULL, 
PASS_CEP VARCHAR (11) NOT NULL,
PASS_NUMRUA VARCHAR(5) NOT NULL,
PASS_RUA VARCHAR (40) NOT NULL,
PASS_BAIRRO VARCHAR (40) NOT NULL, 
PASS_CIDADE VARCHAR (40) NOT NULL, 
PASS_ESTADO VARCHAR (40) NOT NULL, 
PASS_PAIS VARCHAR (40) NOT NULL
);

Create table if not exists AEROPORTOS( 
AEROP_COD INT PRIMARY KEY,
AEROP_NOME VARCHAR (50) NOT NULL, 
AEROP_CIDADE VARCHAR (50) NOT NULL, 
AEROP_PAIS VARCHAR (30) NOT NULL,
AEROP_LATITUDE DECIMAL(9, 6) NOT NULL, 
AEROP_LONGITUDE DECIMAL(9, 6) NOT NULL
);

Create table if not exists AERONAVES (
AERON_PREFIXO VARCHAR(10) PRIMARY KEY,
AERON_MODELO VARCHAR (50) NOT NULL,
AERON_ANOFABR YEAR NOT NULL,
AERON_FABRICANTE VARCHAR (50) NOT NULL,
AERON_CAPACIDADE DECIMAL (10, 2) NOT NULL,
AERON_AUTONOMIA VARCHAR(50) NOT NULLDROP SCHEMA IF EXISTS estudodecaso2_BD;

# Criação do Banco de dados
CREATE SCHEMA IF NOT EXISTS estudodecaso2_BD;

# Uso do banco de dados
USE estudodecaso2_BD;

# Tabelas Normais
CREATE TABLE IF NOT EXISTS PASSAGEIROS (
    PASS_CPF INT PRIMARY KEY, 
    PASS_NOME VARCHAR (100) NOT NULL, 
    PASS_TEL VARCHAR (10) NOT NULL,
    PASS_EMAIL VARCHAR (100) NOT NULL, 
    PASS_CEP VARCHAR (11) NOT NULL,
    PASS_NUMRUA VARCHAR(5) NOT NULL,
    PASS_RUA VARCHAR (40) NOT NULL,
    PASS_BAIRRO VARCHAR (40) NOT NULL, 
    PASS_CIDADE VARCHAR (40) NOT NULL, 
    PASS_ESTADO VARCHAR (40) NOT NULL, 
    PASS_PAIS VARCHAR (40) NOT NULL
);

CREATE TABLE IF NOT EXISTS AEROPORTOS ( 
    AEROP_COD INT PRIMARY KEY,
    AEROP_NOME VARCHAR (50) NOT NULL, 
    AEROP_CIDADE VARCHAR (50) NOT NULL, 
    AEROP_PAIS VARCHAR (30) NOT NULL,
    AEROP_LATITUDE DECIMAL(9, 6) NOT NULL, 
    AEROP_LONGITUDE DECIMAL(9, 6) NOT NULL
);

CREATE TABLE IF NOT EXISTS AERONAVES (
    AERON_PREFIXO VARCHAR(10) PRIMARY KEY,
    AERON_MODELO VARCHAR (50) NOT NULL,
    AERON_ANOFABR YEAR NOT NULL,
    AERON_FABRICANTE VARCHAR (50) NOT NULL,
    AERON_CAPACIDADE DECIMAL (10, 2) NOT NULL,
    AERON_AUTONOMIA VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS FUNCIONARIOS (
    FUNC_ID INT PRIMARY KEY,
    FUNC_NOME VARCHAR (50) NOT NULL,
    FUNC_DATANASC DATE NOT NULL,
    FUNC_CEP VARCHAR (11) NOT NULL,
    FUNC_RUA VARCHAR (40) NOT NULL,
    FUNC_BAIRRO VARCHAR (40) NOT NULL, 
    FUNC_CIDADE VARCHAR (40) NOT NULL, 
    FUNC_ESTADO VARCHAR (40) NOT NULL, 
    FUNC_PAIS VARCHAR (40) NOT NULL,
    FUNC_CPF VARCHAR (11) NOT NULL, 
    FUNC_FUNCAO TEXT NOT NULL
);

CREATE TABLE IF NOT EXISTS VOOS (
    VOO_ID INT PRIMARY KEY,
    VOO_DATA DATE NOT NULL,
    VOO_HORA TIME NOT NULL, 
    VOO_AEROP_ORIGEM INT,  
    VOO_AEROP_DEST INT,
    VOO_AERONAVE VARCHAR(10),
    CONSTRAINT FK_VOO_ORIGEM FOREIGN KEY (VOO_AEROP_ORIGEM) REFERENCES AEROPORTOS (AEROP_COD),
    CONSTRAINT FK_VOO_DESTINO FOREIGN KEY (VOO_AEROP_DEST) REFERENCES AEROPORTOS (AEROP_COD),
    CONSTRAINT FK_VOO_AERONAVE FOREIGN KEY (VOO_AERONAVE) REFERENCES AERONAVES (AERON_PREFIXO)
);

CREATE TABLE IF NOT EXISTS EQUIPES (
    VOO_ID INT,                              
    FUNC_ID INT,                             
    PRIMARY KEY (VOO_ID, FUNC_ID),
    CONSTRAINT FK_EQUIPE_VOO FOREIGN KEY (VOO_ID) REFERENCES VOOS(VOO_ID),
    CONSTRAINT FK_EQUIPE_FUNC FOREIGN KEY (FUNC_ID) REFERENCES FUNCIONARIOS(FUNC_ID)
);

CREATE TABLE IF NOT EXISTS RESERVAS (
    RESERVA_COD INT,
    PASS_CPF INT,
    VOO_ID INT,
    PRIMARY KEY (RESERVA_COD),
    CONSTRAINT FK_RESERVA_VOO FOREIGN KEY (VOO_ID) REFERENCES VOOS(VOO_ID),
    CONSTRAINT FK_PASS_VOO FOREIGN KEY (PASS_CPF) REFERENCES PASSAGEIROS(PASS_CPF)
);
